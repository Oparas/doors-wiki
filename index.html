<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Doors Wiki Viewer</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  img { max-width: 100%; height: auto; }
  audio { display: block; margin: 10px 0; }
  .credit { font-size: 0.9em; color: #555; margin-top: 20px; }
</style>
</head>
<body>

<h2>ข้อมูลจาก Doors Wiki</h2>
<div id="content">กำลังโหลดข้อมูล...</div>
<div class="credit">
  แหล่งข้อมูล: <a href="https://doors.fandom.com/wiki/Figure" target="_blank">Doors Wiki</a> (Fandom)
</div>

<script>
const pageTitle = "Figure"; // เปลี่ยนชื่อบทความได้

// ดึง HTML ของบทความ
fetch(`https://doors.fandom.com/api.php?action=parse&page=${encodeURIComponent(pageTitle)}&format=json&origin=*`)
.then(r => r.json())
.then(data => {
    const contentDiv = document.getElementById("content");

    if (!data.parse || !data.parse.text) {
        contentDiv.innerText = "ไม่พบเนื้อหาหรือ parse failed";
        return;
    }

    // ใส่ HTML ของบทความ
    contentDiv.innerHTML = data.parse.text["*"];

    // แก้ <img> ให้โหลดภาพจริง (Fandom บางครั้งใช้ data-src)
    const imgs = contentDiv.querySelectorAll("img");
    imgs.forEach(img => {
        if (img.dataset.src) {
            img.src = img.dataset.src;
        }
    });

    // ดึงไฟล์เสียงจากบทความ (ถ้ามี)
    // ตัวอย่างสมมติ: เราสมมติว่าไฟล์เสียงชื่อ "Example.mp3"
    // ถ้ารู้ชื่อไฟล์จริง ให้เปลี่ยน URL
    const audioUrl = "https://static.wikia.nocookie.net/doors/images/example.mp3"; 
    // ตรวจสอบจริงก่อนว่าไฟล์มีอยู่
    if (audioUrl) {
        const audio = document.createElement("audio");
        audio.controls = true;
        const source = document.createElement("source");
        source.src = audioUrl;
        source.type = "audio/mpeg";
        audio.appendChild(source);
        contentDiv.appendChild(audio);
    }

})
.catch(err => {
    document.getElementById("content").innerText = "เกิดข้อผิดพลาด: " + err;
    console.error(err);
});
</script>

</body>
</html>